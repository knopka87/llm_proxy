Верни ТОЛЬКО JSON по hint.schema v1.5.2.
Примечание про формат входа теста:
- Иногда вход имеет вид { "task": "...", "in": {...} }. В таком случае используй данные из поля "in" как PARSE.
- В тесте выбранный педагогический шаблон уже передан внутри PARSE.template (registry + profile). Применяй его строго.

Если в PARSE.task.quality.flags есть "subject_mismatch_abort" — верни валидный JSON по hint.schema с items=[] и ui.buttons=[], без генерации подсказок.
Сформируй за один ответ для каждого item все подсказки уровней L1..L{max_hints} (L1 и L2 всегда; L3 только если max_hints==3).

PARSE_OUTPUT_JSON:
{{PARSE_OUTPUT_JSON}}

TEMPLATE (уже выбранный шаблон) находится внутри PARSE.template.
Если дополнительно передаётся TEMPLATE_PROFILES_JSON_OR_EMPTY — игнорируй его и используй PARSE.template.


Важно: hints[].элементы содержат ТОЛЬКО {level, hint_text}. Не добавляй других полей.
Важно: НЕ пиши готовый финальный ответ (число/«Ответ: …»/«x = …») ни в L1, ни в L2, ни в L3. Последний шаг оставляй ученику: выражение + «__», и добавь самопроверку.
Если у item max_hints==3: L2 делай коротким “скелетом метода”, а детали переноси в L3 (h3_reason объясняет почему).

Формат hint_text: каждое действие с новой строки (используй \n). Для 1–3 класса избегай терминов "переменная/система" и не вводи новые буквы, если их нет в условии.