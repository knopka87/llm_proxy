{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "check.schema.json",
  "title": "CheckSchema.v1.2a",
  "type": "object",
  "properties": {
    "version": { "type": "string", "const": "1.2" },
    "branch": { "type": "string", "enum": ["math_branch", "ru_branch", "generic_branch"] },
    "verdict": { "type": "string", "enum": ["pass", "fail", "needs_more_info"] },
    "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
    "issues": {
      "type": "array",
      "maxItems": 3,
      "items": {
        "type": "object",
        "properties": {
          "reason": { "type": "string", "maxLength": 180 },
          "fix_suggestions": { "type": "array", "maxItems": 2, "items": { "type": "string", "maxLength": 240 } }
        },
        "required": ["reason"],
        "additionalProperties": false
      }
    },
    "math_checks": {
      "type": "object",
      "properties": {
        "units_ok": { "type": "boolean" },
        "rounding_ok": { "type": "boolean" },
        "substitution_ok": { "type": "boolean" }
      },
      "additionalProperties": false
    },
    "ru_checks": {
      "type": "object",
      "properties": {
        "rule_ref": { "type": "string" },
        "counterexample": { "type": "string" }
      },
      "additionalProperties": false
    },
    "safety": {
      "type": "object",
      "properties": {
        "pii_removed": { "type": "boolean" },
        "banned_content": { "type": "boolean" },
        "pii_categories": { "type": "array", "items": { "type": "string" } },
        "notes": { "type": "string" }
      },
      "required": ["pii_removed", "banned_content"],
      "additionalProperties": false
    }
  },
  "required": ["version", "branch", "verdict", "confidence", "safety"],
  "additionalProperties": false
}